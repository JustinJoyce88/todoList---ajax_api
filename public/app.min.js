function addTodos(o){o.forEach(function(o){addTodo(o)})}function createTodo(){var o=$("#todoInput").val();$.post("/api/todos",{name:o}).then(function(o){$("#todoInput").val(""),addTodo(o)}).catch(function(o){console.log(o)})}function addTodo(o){var t=$('<li class="task">'+o.name+"<span>X</span</li>");t.data("id",o._id),t.data("completed",o.completed),o.completed&&t.addClass("done"),$(".list").append(t)}function removeTodo(o){$.ajax({method:"DELETE",url:"/api/todos/"+o.data("id")}).then(function(t){o.remove()}).catch(function(o){console.log(o)})}function updateTodo(o){var t=!o.data("completed"),d={completed:t};$.ajax({method:"PUT",url:"/api/todos/"+o.data("id"),data:d}).then(function(d){o.toggleClass("done"),o.data("completed",t)}).catch(function(o){console.log(o)})}$(document).ready(function(){$.getJSON("/api/todos").then(addTodos),$("#todoInput").keypress(function(o){13===o.which&&createTodo()}),$(".list").on("click","li",function(){updateTodo($(this))}),$(".list").on("click","span",function(o){o.stopPropagation(),removeTodo($(this).parent())})});